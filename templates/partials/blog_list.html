{% for post in posts %}

<article class="group bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col h-full animate-fade-in-up">

    <a href="{{ post.get_absolute_url }}" class="block relative overflow-hidden h-48 cursor-pointer">
        {% if post.image %}
        <img src="{{ post.image.url }}" alt="{{ post.title }}"
            class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500">
        {% else %}
        <img src="https://placehold.co/600x400/1e1e1e/FFF?text=No+Image" alt="Placeholder"
            class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500">
        {% endif %}

        <a href="{% url 'category_page' post.category.slug %}" 
           class="absolute top-4 left-4 bg-primary text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg hover:bg-white hover:text-primary transition z-10">
            {{ post.category.name }}
        </a>
    </a>

    <div class="p-6 flex-grow flex flex-col">
        <div class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-3">
            <i class="ri-calendar-line"></i> <span>{{ post.created_at|date:"M d, Y" }}</span>
            <span class="mx-1">â€¢</span>
            <i class="ri-time-line"></i> <span>{{ post.reading_time }}</span>
        </div>

        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary transition">
            <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
        </h3>

        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-3 flex-grow">
            {{ post.content|striptags|truncatewords:20 }}
        </p>

        <div class="mt-auto flex items-center justify-between border-t border-gray-100 dark:border-gray-700 pt-4">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-primary font-bold overflow-hidden">
                    {{ post.author.username|slice:":1"|upper }}
                </div>
                <span class="text-sm font-medium text-gray-900 dark:text-white">
                    {{ post.author.username }}
                </span>
            </div>
            <a href="{{ post.get_absolute_url }}" class="text-primary hover:text-secondary font-semibold text-sm">
                Read Post <i class="ri-arrow-right-line"></i>
            </a>
        </div>
    </div>
</article>

{% empty %}
<div class="col-span-3 text-center py-10">
    <p class="text-gray-500 text-lg">No matching posts found.</p>
</div>

{% endfor %}